<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#dc2626">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - IAG</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 1. BASE STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 1.1 Body */
    body { 
      font-family: 'Cairo', sans-serif; 
      background: #f8f9fa;
      margin: 0;
      padding-bottom: 70px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 2. SIDEBAR (Desktop) */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 2.1 Container */
    .sidebar {
      position: fixed;
      right: 0;
      top: 0;
      width: 260px;
      height: 100vh;
      background: white;
      box-shadow: -2px 0 10px rgba(0,0,0,0.08);
      z-index: 100;
      overflow-y: auto;
    }
    
    /* 2.2 Logo Section */
    .sidebar-logo {
      padding: 24px;
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
    }
    
    /* 2.3 Navigation Items */
    .sidebar-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 24px;
      color: #495057;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.2s;
      border-right: 3px solid transparent;
    }
    
    .sidebar-item:hover, .sidebar-item.active {
      background: #fef2f2;
      border-right-color: #dc2626;
      color: #dc2626;
    }
    
    .sidebar-item.hidden {
      display: none;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 3. BOTTOM NAVIGATION (Mobile) */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 3.1 Container */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      z-index: 200;
      display: none;
    }
    
    /* 3.2 Items Grid */
    .bottom-nav-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
      gap: 0;
    }
    
    /* 3.3 Navigation Item */
    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 12px 8px;
      color: #64748b;
      text-decoration: none;
      font-size: 0.7rem;
      font-weight: 600;
      transition: all 0.2s;
      border-top: 3px solid transparent;
    }
    
    .bottom-nav-item:hover, .bottom-nav-item.active {
      background: #fef2f2;
      border-top-color: #dc2626;
      color: #dc2626;
    }
    
    .bottom-nav-item.hidden {
      display: none;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 4. MAIN CONTENT */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 4.1 Container */
    .main-content {
      margin-right: 260px;
      padding: 24px;
    }
    
    /* 4.2 Cards */
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-bottom: 24px;
      border: 1px solid #e9ecef;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 5. TABS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 5.1 Tabs Container */
    .tabs-container {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      border-bottom: 2px solid #e9ecef;
      overflow-x: auto;
    }
    
    /* 5.2 Tab Button */
    .tab-btn {
      padding: 14px 24px;
      background: transparent;
      color: #64748b;
      border: none;
      border-bottom: 3px solid transparent;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
      font-size: 0.95rem;
      width: auto;
    }
    
    .tab-btn:hover {
      color: #dc2626;
      background: #fef2f2;
    }
    
    .tab-btn.active {
      color: #dc2626;
      border-bottom-color: #dc2626;
      background: transparent;
    }
    
    /* 5.3 Tab Content */
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 6. FILTERS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 6.1 Grid */
    .filter-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }
    
    /* 6.2 Label */
    .filter-label {
      display: block;
      font-weight: 700;
      font-size: 0.875rem;
      margin-bottom: 8px;
      color: #475569;
    }
    
    /* 6.3 Select & Input */
    select, input {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-weight: 600;
      font-family: 'Cairo', sans-serif;
    }
    
    select:focus, input:focus {
      outline: none;
      border-color: #dc2626;
    }
    
    /* 6.4 Button */
    button {
      background: #dc2626;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 700;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      width: 100%;
    }
    
    button:hover {
      background: #b91c1c;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 7. TASK GRID */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 7.1 Grid */
    .task-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 16px;
    }
    
    /* 7.2 Card */
    .task-card {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.2s;
    }
    
    .task-card:hover {
      border-color: #dc2626;
      box-shadow: 0 4px 16px rgba(220, 38, 38, 0.1);
      transform: translateY(-2px);
    }
    
    /* 7.3 Header */
    .task-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .task-id {
      font-weight: 800;
      font-size: 1.1rem;
      color: #1e293b;
    }
    
    /* 7.4 Badges */
    .badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 700;
    }
    
    .badge-done { background: #dcfce7; color: #166534; }
    .badge-pending { background: #fef3c7; color: #92400e; }
    
    /* 7.5 Subject */
    .task-subject {
      color: #475569;
      font-weight: 600;
      margin-bottom: 12px;
      min-height: 45px;
      line-height: 1.5;
    }
    
    /* 7.6 Meta */
    .task-meta {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.8rem;
      color: #64748b;
      margin-bottom: 12px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 8. REASSIGN BOX */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 8.1 Container */
    .reassign-box {
      background: #f8fafc;
      padding: 12px;
      border-radius: 8px;
      border: 2px dashed #cbd5e1;
      margin-top: 12px;
    }
    
    /* 8.2 Current */
    .reassign-current {
      font-size: 0.85rem;
      font-weight: 700;
      color: #475569;
      margin-bottom: 8px;
    }
    
    /* 8.3 Controls */
    .reassign-controls {
      display: flex;
      gap: 8px;
    }
    
    .reassign-controls select {
      flex-grow: 1;
      padding: 8px;
      font-size: 0.85rem;
    }
    
    .reassign-controls button {
      padding: 8px 16px;
      font-size: 0.85rem;
      width: auto;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 9. EMPLOYEE GROUPS (for monitoring tab) */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 9.1 Group */
    .employee-group {
      margin-bottom: 30px;
    }
    
    /* 9.2 Header */
    .employee-header {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 10. LOADING */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 10.1 Overlay */
    .loading {
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    
    .loading.hidden { display: none; }
    
    /* 10.2 Spinner */
    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #e9ecef;
      border-top-color: #dc2626;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 11. RESPONSIVE */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    /* 11.1 Tablet & Mobile */
    @media (max-width: 1024px) {
      .sidebar { 
        transform: translateX(100%); 
      }
      .main-content { 
        margin-right: 0; 
      }
      .bottom-nav {
        display: block;
      }
    }
    
    /* 11.2 Mobile Only */
    @media (max-width: 640px) {
      .task-grid {
        grid-template-columns: 1fr;
      }
      .filter-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 1. LOADING OVERLAY -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="loading hidden" id="loading">
    <div class="spinner"></div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 2. SIDEBAR (Desktop) -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <h2 class="text-xl font-bold mb-1">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
      <p id="user-name-sidebar" class="text-sm opacity-90">Ù…Ø±Ø­Ø¨Ø§Ù‹</p>
    </div>
    
    <nav class="py-4">
      <a href="index.html" class="sidebar-item">
        <i data-lucide="home" class="w-5 h-5"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </a>
      
      <a href="distribution.html" class="sidebar-item">
        <i data-lucide="pie-chart" class="w-5 h-5"></i>
        <span>Dashboard</span>
      </a>
      
      <a href="forms.html" class="sidebar-item">
        <i data-lucide="file-text" class="w-5 h-5"></i>
        <span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
      </a>
      
      <a href="employee.html" class="sidebar-item">
        <i data-lucide="briefcase" class="w-5 h-5"></i>
        <span>Ù…Ù‡Ø§Ù…ÙŠ</span>
      </a>
      
      <a href="coordinator.html" class="sidebar-item" id="coordinator-link">
        <i data-lucide="users" class="w-5 h-5"></i>
        <span>Ø§Ù„Ù…Ù†Ø³Ù‚ÙŠÙ†</span>
      </a>
      
      <a href="admin.html" class="sidebar-item active">
        <i data-lucide="settings" class="w-5 h-5"></i>
        <span>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      </a>
    </nav>
  </aside>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 3. BOTTOM NAVIGATION (Mobile) -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <nav class="bottom-nav">
    <div class="bottom-nav-grid">
      
      <!-- Home -->
      <a href="index.html" class="bottom-nav-item">
        <i data-lucide="home" class="w-5 h-5"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </a>
      
      <!-- Dashboard -->
      <a href="distribution.html" class="bottom-nav-item">
        <i data-lucide="pie-chart" class="w-5 h-5"></i>
        <span>Dashboard</span>
      </a>
      
      <!-- Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ -->
      <a href="forms.html" class="bottom-nav-item">
        <i data-lucide="file-text" class="w-5 h-5"></i>
        <span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
      </a>
      
      <!-- Ù…Ù‡Ø§Ù…ÙŠ -->
      <a href="employee.html" class="bottom-nav-item">
        <i data-lucide="briefcase" class="w-5 h-5"></i>
        <span>Ù…Ù‡Ø§Ù…ÙŠ</span>
      </a>
      
      <!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
      <a href="admin.html" class="bottom-nav-item active">
        <i data-lucide="settings" class="w-5 h-5"></i>
        <span>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      </a>
    </div>
  </nav>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 4. MAIN CONTENT -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <main class="main-content">
    
    <!-- 4.1 Header Card -->
    <div class="card" style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; border: none;">
      <h1 style="font-size: 1.75rem; font-weight: 800;">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h1>
      <p id="user-name-header" class="text-sm opacity-90 mt-2">Ù…Ø±Ø­Ø¨Ø§Ù‹</p>
    </div>

    <!-- 4.2 Tabs -->
    <div class="tabs-container">
      <button class="tab-btn active" onclick="switchTab('reassign')">
        <i data-lucide="refresh-cw" style="width: 16px; height: 16px; display: inline; vertical-align: middle; margin-left: 4px;"></i>
        Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙƒÙ„ÙŠÙ
      </button>
      <button class="tab-btn" onclick="switchTab('new')">
        <i data-lucide="plus-circle" style="width: 16px; height: 16px; display: inline; vertical-align: middle; margin-left: 4px;"></i>
        ØªÙƒÙ„ÙŠÙ Ø¬Ø¯ÙŠØ¯
      </button>
      <button class="tab-btn" onclick="switchTab('monitor')">
        <i data-lucide="eye" style="width: 16px; height: 16px; display: inline; vertical-align: middle; margin-left: 4px;"></i>
        Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
      </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB 1: Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙƒÙ„ÙŠÙ -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="tab-reassign" class="tab-content active">
      <div class="card">
        <h2 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 16px; color: #1e293b;">Ø§Ù„ÙÙ„Ø§ØªØ±</h2>
        
        <div class="filter-grid">
          <div>
            <label class="filter-label">Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</label>
            <select id="period-filter-reassign">
              <option value="week">Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹</option>
              <option value="month">Ø¢Ø®Ø± Ø´Ù‡Ø±</option>
              <option value="3months">Ø¢Ø®Ø± 3 Ø£Ø´Ù‡Ø±</option>
              <option value="year">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</option>
              <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØªØ±Ø§Øª</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ù…ÙˆØ¸Ù</label>
            <select id="employee-filter-reassign">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ø¬Ù‡Ø©</label>
            <select id="entity-filter-reassign">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù‡Ø§Øª</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
            <select id="status-filter-reassign">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
              <option value="Ø¬Ø¯ÙŠØ¯">Ø¬Ø¯ÙŠØ¯</option>
              <option value="Ø¬Ø§Ø±ÙŠ">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
              <option value="Ù…Ù†ØªÙ‡ÙŠ">Ù…Ù†ØªÙ‡ÙŠ</option>
              <option value="Ù…ØªØ£Ø®Ø±">Ù…ØªØ£Ø®Ø±</option>
            </select>
          </div>
        </div>

        <button onclick="applyFiltersReassign()">
          <i data-lucide="filter" style="width: 18px; height: 18px; display: inline; vertical-align: middle;"></i>
          ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±
        </button>
      </div>

      <div id="results-reassign">
        <p style="text-align: center; color: #94a3b8; padding: 60px 20px;">Ø§Ø®ØªØ± Ø§Ù„ÙÙ„Ø§ØªØ± ÙˆØ§Ø¶ØºØ· "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±"</p>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB 2: ØªÙƒÙ„ÙŠÙ Ø¬Ø¯ÙŠØ¯ -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="tab-new" class="tab-content">
      <div class="card">
        <h2 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 16px; color: #1e293b;">Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        
        <div class="filter-grid">
          <div>
            <label class="filter-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯</label>
            <select id="new-doctype">
              <option value="ØµØ§Ø¯Ø±">ØµØ§Ø¯Ø±</option>
              <option value="ÙˆØ§Ø±Ø¯">ÙˆØ§Ø±Ø¯</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
            <input type="date" id="new-date" required>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ù…ØµØ¯Ø±</label>
            <input type="text" id="new-source" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©">
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ø¬Ù‡Ø©</label>
            <input type="text" id="new-entity" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„ÙÙŠÙˆÙ…">
          </div>

          <div style="grid-column: 1 / -1;">
            <label class="filter-label">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</label>
            <input type="text" id="new-subject" placeholder="Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù…Ù‡Ù…Ø©...">
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…ÙƒÙ„Ù</label>
            <select id="new-employee">
              <option value="">Ø§Ø®ØªØ± Ù…ÙˆØ¸Ù...</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>
            <select id="new-priority">
              <option value="Ø¹Ø§Ø¯ÙŠ">Ø¹Ø§Ø¯ÙŠ</option>
              <option value="Ù…Ù‡Ù…">Ù…Ù‡Ù…</option>
              <option value="Ø¹Ø§Ø¬Ù„">Ø¹Ø§Ø¬Ù„</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</label>
            <input type="date" id="new-deadline">
          </div>
        </div>

        <button onclick="addNewTask()">
          <i data-lucide="plus" style="width: 18px; height: 18px; display: inline; vertical-align: middle;"></i>
          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©
        </button>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB 3: Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="tab-monitor" class="tab-content">
      <div class="card">
        <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 16px;">Ø§Ù„ÙÙ„Ø§ØªØ±</h2>
        
        <div class="filter-grid">
          <div>
            <label class="filter-label">Ø§Ù„ÙØªØ±Ø©</label>
            <select id="period-filter-monitor">
              <option value="week" selected>Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹</option>
              <option value="month">Ø¢Ø®Ø± Ø´Ù‡Ø±</option>
              <option value="3months">Ø¢Ø®Ø± 3 Ø£Ø´Ù‡Ø±</option>
              <option value="year">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</option>
              <option value="all">Ø§Ù„ÙƒÙ„</option>
            </select>
          </div>

          <div>
            <label class="filter-label">Ø§Ù„Ù…ÙˆØ¸Ù</label>
            <select id="emp-filter-monitor">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>
              <option value="ALL_FINANCIAL">ğŸ”¹ Ø§Ù„Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</option>
              <option value="ALL_TECHNICAL">ğŸ”§ Ø§Ù„ÙÙ†ÙŠÙŠÙ†</option>
            </select>
          </div>
        </div>

        <button onclick="loadDataMonitor()">ğŸ” ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±</button>
      </div>

      <div id="results-monitor" style="color: #94a3b8; text-align: center; padding: 40px;">
        Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...
      </div>
    </div>

  </main>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 5. SCRIPTS -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="assets/js/config.js"></script>
  <script src="assets/js/auth.js"></script>
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 1. INITIALIZATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    lucide.createIcons();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 2. SECURITY & AUTHENTICATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 2.1 Check Session
    const user = auth.checkSession();
    if (!user || (user.role !== 'Ù…Ø¯ÙŠØ±' && user.role !== 'Admin')) {
      alert('âš ï¸ ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
      window.location.replace('index.html');
    }

    // 2.2 Display User Info
    document.getElementById('user-name-sidebar').textContent = `${user.name} ğŸ‘‹`;
    document.getElementById('user-name-header').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user.name} - ${user.jobTitle || user.role}`;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 3. ROLE-BASED NAVIGATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 3.1 Admin-only page - Redirect if not admin
    const isAdmin = user.role === 'Ù…Ø¯ÙŠØ±' || user.role === 'Admin';
    
    if (!isAdmin) {
      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©');
      window.location.replace('index.html');
    }
    
    // 3.2 Display user name
    document.getElementById('user-name-sidebar').textContent = `${user.name} ğŸ‘‹`;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 4. GLOBAL VARIABLES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    let allEmployees = [];
    let allEntities = [];
    let allTasks = [];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 5. TABS MANAGEMENT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 5.1 Switch Tab
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active class from all buttons
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(`tab-${tabName}`).classList.add('active');
      
      // Highlight selected button
      event.target.closest('.tab-btn').classList.add('active');
      
      // Reinit icons
      lucide.createIcons();
      
      // Load data if monitoring tab
      if (tabName === 'monitor') {
        loadDataMonitor();
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 6. HELPER FUNCTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 6.1 Sanitization
    function escapeHtml(text) {
      if (!text) return '';
      return text.toString()
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // 6.2 Get Date Range
    function getDateRange(periodId) {
      const today = new Date();
      const periodElement = document.getElementById(periodId);
      const period = periodElement ? periodElement.value : 'week';
      let start = new Date(today);
      
      switch(period) {
        case 'week': start.setDate(today.getDate() - 7); break; // Default: Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…
        case 'month': start.setMonth(today.getMonth() - 1); break;
        case '3months': start.setMonth(today.getMonth() - 3); break;
        case 'year': start = new Date(today.getFullYear(), 0, 1); break;
        case 'all': start = new Date('2020-01-01'); break;
        default: start.setDate(today.getDate() - 7); break; // Default fallback
      }
      
      return {
        start: start.toISOString().split('T')[0],
        end: today.toISOString().split('T')[0]
      };
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 7. TAB 1: Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙƒÙ„ÙŠÙ
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 7.1 Apply Filters
    async function applyFiltersReassign() {
      document.getElementById('loading').classList.remove('hidden');

      try {
        const range = getDateRange('period-filter-reassign');
        
        const result = await auth.apiCall('getAllData', {
          role: 'Ù…Ø¯ÙŠØ±',
          name: user.name,
          startDate: range.start,
          endDate: range.end
        });

        if (!result || !result.success) {
          throw new Error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        }

        allTasks = result.tasks || [];
        allEmployees = result.stats.employees || [];
        
        // Extract unique entities
        const entitiesSet = new Set();
        allTasks.forEach(t => {
          if (t.entity) entitiesSet.add(t.entity);
        });
        allEntities = Array.from(entitiesSet).sort();

        // Populate dropdowns
        populateDropdownsReassign();

        // Filter tasks
        let filtered = allTasks;

        const empFilter = document.getElementById('employee-filter-reassign').value;
        if (empFilter) {
          filtered = filtered.filter(t => t.assignee && t.assignee.includes(empFilter));
        }

        const entityFilter = document.getElementById('entity-filter-reassign').value;
        if (entityFilter) {
          filtered = filtered.filter(t => t.entity && t.entity.includes(entityFilter));
        }

        const statusFilter = document.getElementById('status-filter-reassign').value;
        if (statusFilter) {
          filtered = filtered.filter(t => t.status && t.status.includes(statusFilter));
        }

        renderTasksReassign(filtered);

      } catch (err) {
        document.getElementById('results-reassign').innerHTML = `
          <div style="text-align: center; padding: 60px 20px; color: #dc2626;">
            <div style="font-size: 3rem; margin-bottom: 12px;">âŒ</div>
            <h3 style="font-weight: 700; margin-bottom: 8px;">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</h3>
            <p style="color: #64748b;">${escapeHtml(err.message)}</p>
          </div>
        `;
      } finally {
        document.getElementById('loading').classList.add('hidden');
      }
    }

    // 7.2 Populate Dropdowns
    function populateDropdownsReassign() {
      const empSelect = document.getElementById('employee-filter-reassign');
      if (empSelect.options.length <= 1) {
          empSelect.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>' +
            allEmployees.map(e => `<option value="${escapeHtml(e.name)}">${escapeHtml(e.name)}</option>`).join('');
      }

      const entitySelect = document.getElementById('entity-filter-reassign');
      if (entitySelect.options.length <= 1) {
          entitySelect.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù‡Ø§Øª</option>' +
            allEntities.map(e => `<option value="${escapeHtml(e)}">${escapeHtml(e)}</option>`).join('');
      }
    }

    // 7.3 Render Tasks
    function renderTasksReassign(tasks) {
      const container = document.getElementById('results-reassign');

      if (!tasks || tasks.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 60px 20px; color: #94a3b8;">
            <div style="font-size: 3rem; margin-bottom: 12px;">ğŸ“­</div>
            <p style="font-size: 1.1rem; font-weight: 600;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ÙÙ„ØªØ±</p>
          </div>
        `;
        return;
      }

      container.innerHTML = `<div class="task-grid">${tasks.map(t => {
        const isDone = (t.status || '').includes('ØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯') || (t.status || '').includes('Ù…Ù†ØªÙ‡ÙŠ');
        
        return `
          <div class="task-card">
            <div class="task-header">
              <div class="task-id">${escapeHtml(t.id)}</div>
              <span class="badge ${isDone ? 'badge-done' : 'badge-pending'}">${escapeHtml(t.status || 'Ø¬Ø¯ÙŠØ¯')}</span>
            </div>
            
            <div class="task-subject">${escapeHtml(t.subject)}</div>
            
            <div class="task-meta">
              <div><strong>ğŸ“¥ Ù…Ù†:</strong> ${escapeHtml(t.source || t.entity)}</div>
              <div><strong>ğŸ“ Ø§Ù„ØªÙ†ÙÙŠØ°:</strong> ${escapeHtml(t.executionLocation || t.entity)}</div>
              <div><strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${escapeHtml(t.date)}</div>
              ${t.attachment ? `<div><a href="${t.attachment}" target="_blank" rel="noopener noreferrer" style="color: #0f766e; text-decoration: underline;">ğŸ“ Ø§Ù„Ù…Ø±ÙÙ‚</a></div>` : ''}
              ${t.report ? `<div><a href="${t.report}" target="_blank" rel="noopener noreferrer" style="color: #dc2626; text-decoration: underline;">ğŸ“„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</a></div>` : ''}
            </div>

            <div class="reassign-box">
              <div class="reassign-current">
                <i data-lucide="user" style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i>
                ${escapeHtml(t.assignee)}
              </div>
              <div class="reassign-controls">
                <select id="new-emp-${escapeHtml(t.id)}">
                  <option value="">Ø§Ø®ØªØ± Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯...</option>
                  ${allEmployees.map(e => `<option value="${escapeHtml(e.name)}">${escapeHtml(e.name)}</option>`).join('')}
                </select>
                <button onclick="reassignTask('${escapeHtml(t.id)}')">
                  <i data-lucide="refresh-cw" style="width: 16px; height: 16px; display: inline; vertical-align: middle;"></i>
                  ØªÙƒÙ„ÙŠÙ
                </button>
              </div>
            </div>
          </div>
        `;
      }).join('')}</div>`;

      lucide.createIcons();
    }

    // 7.4 Reassign Task
    async function reassignTask(taskId) {
      const newEmp = document.getElementById(`new-emp-${taskId}`).value;
      
      if (!newEmp) {
        alert('Ø±Ø¬Ø§Ø¡Ù‹ Ø§Ø®ØªØ± Ù…ÙˆØ¸ÙØ§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©');
        return;
      }

      const safeId = escapeHtml(taskId);
      const safeEmp = escapeHtml(newEmp);

      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªÙƒÙ„ÙŠÙ Ø§Ù„Ù…Ù‡Ù…Ø© Ø±Ù‚Ù… (${safeId}) Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¸Ù (${safeEmp})ØŸ`)) return;

      document.getElementById('loading').classList.remove('hidden');

      try {
        const result = await auth.apiCall('reassignTask', {
          taskId: taskId,
          newEmployee: newEmp
        });

        if (result && result.success) {
          alert('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙƒÙ„ÙŠÙ Ø¨Ù†Ø¬Ø§Ø­!\nğŸ“§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯');
          applyFiltersReassign();
        } else {
          alert('âŒ ÙØ´Ù„: ' + (result.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));
        }
      } catch (err) {
        alert('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + err.message);
      } finally {
        document.getElementById('loading').classList.add('hidden');
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 8. TAB 2: ØªÙƒÙ„ÙŠÙ Ø¬Ø¯ÙŠØ¯
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 8.1 Populate Employee Dropdown for New Task
    async function populateNewTaskEmployees() {
      if (allEmployees.length === 0) {
        // Load employees if not loaded
        try {
          const result = await auth.apiCall('getAllData', {
            role: 'Ù…Ø¯ÙŠØ±',
            name: user.name,
            startDate: '2020-01-01',
            endDate: new Date().toISOString().split('T')[0]
          });
          
          if (result && result.success) {
            allEmployees = result.stats.employees || [];
          }
        } catch (e) {
          console.error('Error loading employees:', e);
        }
      }
      
      const select = document.getElementById('new-employee');
      select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ù…ÙˆØ¸Ù...</option>' +
        allEmployees.map(e => `<option value="${escapeHtml(e.name)}">${escapeHtml(e.name)}</option>`).join('');
    }

    // 8.2 Add New Task
    async function addNewTask() {
      const taskData = {
        docType: document.getElementById('new-doctype').value,
        date: document.getElementById('new-date').value,
        source: document.getElementById('new-source').value,
        entity: document.getElementById('new-entity').value,
        subject: document.getElementById('new-subject').value,
        employee: document.getElementById('new-employee').value,
        priority: document.getElementById('new-priority').value,
        deadline: document.getElementById('new-deadline').value
      };

      // Validation
      if (!taskData.date || !taskData.subject || !taskData.employee) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ØŒ Ø§Ù„Ù…ÙˆØ¸Ù');
        return;
      }

      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) return;

      document.getElementById('loading').classList.remove('hidden');

      try {
        const result = await auth.apiCall('addTask', { taskData });

        if (result && result.success) {
          alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!\nØ±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯: ' + result.id);
          
          // Clear form
          document.getElementById('new-date').value = '';
          document.getElementById('new-source').value = '';
          document.getElementById('new-entity').value = '';
          document.getElementById('new-subject').value = '';
          document.getElementById('new-employee').value = '';
          document.getElementById('new-deadline').value = '';
        } else {
          alert('âŒ ÙØ´Ù„: ' + (result.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));
        }
      } catch (err) {
        alert('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + err.message);
      } finally {
        document.getElementById('loading').classList.add('hidden');
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 9. TAB 3: Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // 9.1 Load Data for Monitoring
    async function loadDataMonitor() {
      document.getElementById('results-monitor').innerHTML = '<div style="color: #94a3b8; text-align: center; padding: 40px;">â³ Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';

      try {
        const range = getDateRange('period-filter-monitor');
        
        const result = await auth.apiCall('getAllData', {
          role: 'Ù…Ø¯ÙŠØ±',
          name: user.name,
          startDate: range.start,
          endDate: range.end
        });

        if (!result || !result.success) throw new Error('ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„');

        allTasks = result.tasks || [];
        allEmployees = result.stats.employees || [];

        // Populate employee dropdown with actual names
        const empFilter = document.getElementById('emp-filter-monitor');
        let options = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>';
        
        // Get unique employee names from tasks
        const employeeSet = new Set();
        allTasks.forEach(t => {
          if (t.assignee) employeeSet.add(t.assignee);
        });
        
        // Add each employee
        Array.from(employeeSet).sort().forEach(emp => {
          options += `<option value="${escapeHtml(emp)}">${escapeHtml(emp)}</option>`;
        });
        
        if (empFilter.options.length <= 1) {
          empFilter.innerHTML = options;
        }

        filterAndDisplayMonitor();

      } catch (err) {
        console.error('Error:', err);
        document.getElementById('results-monitor').innerHTML = `<div style="color: #dc2626; text-align: center; padding: 40px;">âŒ ${escapeHtml(err.message)}</div>`;
      }
    }

    // 9.2 Filter and Display
    function filterAndDisplayMonitor() {
      const empFilter = document.getElementById('emp-filter-monitor').value;
      let filtered = allTasks;

      if (empFilter) {
        filtered = allTasks.filter(t => t.assignee && t.assignee.includes(empFilter));
      }

      displayTasksMonitor(filtered);
    }

      displayTasksMonitor(filtered);
    }

    // 9.3 Display Tasks (Grouped by Employee)
    function displayTasksMonitor(tasks) {
      const container = document.getElementById('results-monitor');

      if (!tasks || tasks.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 60px; color: #94a3b8;"><div style="font-size: 3rem;">ğŸ”­</div><p style="font-weight: 600; margin-top: 12px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©</p></div>';
        return;
      }

      // Group by Employee
      const grouped = {};
      tasks.forEach(t => {
        const emp = t.assignee || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        if (!grouped[emp]) grouped[emp] = [];
        grouped[emp].push(t);
      });

      let html = '';

      Object.entries(grouped).forEach(([emp, empTasks]) => {
        const done = empTasks.filter(t => {
          const s = t.status || '';
          return s.includes('ØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯') || s.includes('Ù…Ù†ØªÙ‡ÙŠ') || s.includes('Ø£Ø±Ø´ÙŠÙ');
        }).length;

        html += `
          <div class="employee-group">
            <div class="employee-header">
              <div>
                <div style="font-size: 1.25rem; font-weight: 800;">${escapeHtml(emp)}</div>
                <div style="font-size: 0.875rem; opacity: 0.9;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${empTasks.length}</div>
              </div>
              <div style="display: flex; gap: 20px;">
                <div style="text-align: center;">
                  <div style="font-size: 1.5rem; font-weight: 800;">${done}</div>
                  <div style="font-size: 0.75rem; opacity: 0.9;">Ù…Ù†ØªÙ‡ÙŠ</div>
                </div>
                <div style="text-align: center;">
                  <div style="font-size: 1.5rem; font-weight: 800;">${empTasks.length - done}</div>
                  <div style="font-size: 0.75rem; opacity: 0.9;">Ø¬Ø§Ø±ÙŠ</div>
                </div>
              </div>
            </div>

            <div class="task-grid">
            ${empTasks.map(t => {
              const isDone = (t.status || '').includes('ØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯') || (t.status || '').includes('Ù…Ù†ØªÙ‡ÙŠ') || (t.status || '').includes('Ø£Ø±Ø´ÙŠÙ');
              
              return `
                <div class="task-card">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <div style="font-weight: 700; color: #1e293b;">${escapeHtml(t.id)}</div>
                    <span class="badge ${isDone ? 'badge-done' : 'badge-pending'}">
                      ${isDone ? 'âœ… Ù…Ù†ØªÙ‡ÙŠ' : 'â³ Ø¬Ø§Ø±ÙŠ'}
                    </span>
                  </div>
                  
                  <div style="color: #475569; font-weight: 600; margin-bottom: 12px; min-height: 40px;">
                    ${escapeHtml(t.subject)}
                  </div>
                  
                  <div style="font-size: 0.8rem; color: #64748b; display: flex; flex-direction: column; gap: 4px;">
                    <div><strong>ğŸ“¥ Ù…Ù†:</strong> ${escapeHtml(t.source || t.entity)}</div>
                    <div><strong>ğŸ“ Ø§Ù„ØªÙ†ÙÙŠØ°:</strong> ${escapeHtml(t.executionLocation || t.entity)}</div>
                    <div><strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${escapeHtml(t.date)}</div>
                    ${t.attachment ? `<div><a href="${escapeHtml(t.attachment)}" target="_blank" rel="noopener noreferrer" style="color: #0f766e; text-decoration: underline;">ğŸ“ Ø§Ù„Ù…Ø±ÙÙ‚</a></div>` : ''}
                    ${t.report ? `<div><a href="${escapeHtml(t.report)}" target="_blank" rel="noopener noreferrer" style="color: #dc2626; text-decoration: underline;">ğŸ“„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</a></div>` : ''}
                  </div>
                </div>
              `;
            }).join('')}
            </div>
          </div>
        `;
      });

      container.innerHTML = html;
      lucide.createIcons();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 10. INITIALIZATION ON PAGE LOAD
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // Load employees for new task form
    populateNewTaskEmployees();
    
    // Load monitoring data by default
    loadDataMonitor();
  </script>
</body>
</html>
