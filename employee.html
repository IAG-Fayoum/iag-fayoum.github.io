<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ğŸ“„ employee.html - ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù (Ù…Ø­Ø¯Ù‘Ø« ÙˆÙ…Ø±Ù‚Ù… Ù‡Ø±Ù…ÙŠØ§Ù‹)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <!-- 1.1 META -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØµÙØ­ØªÙŠ - IAG</title>
  
  <!-- 1.2 STYLES -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body>
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       2. SIDEBAR
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar">
    <!-- 2.1 LOGO -->
    <div class="sidebar-logo">
      <h2 class="text-xl font-bold mb-2">IAG System</h2>
      <p id="user-name" class="text-sm opacity-90">Ù…Ø±Ø­Ø¨Ø§Ù‹</p>
    </div>
    
    <!-- 2.2 NAVIGATION -->
    <nav style="padding: 16px 0;">
      <!-- 2.2.1 Home -->
      <a href="index.html" class="sidebar-item">
        <i data-lucide="home" style="width: 20px; height: 20px;"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </a>
      
      <!-- 2.2.2 Dashboard -->
      <a href="distribution.html" class="sidebar-item">
        <i data-lucide="pie-chart" style="width: 20px; height: 20px;"></i>
        <span>Dashboard</span>
      </a>
      
      <!-- 2.2.3 Forms -->
      <a href="forms.html" class="sidebar-item">
        <i data-lucide="file-text" style="width: 20px; height: 20px;"></i>
        <span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
      </a>
      
      <!-- 2.2.4 Notifications -->
      <a href="notifications.html" class="sidebar-item" style="position: relative;">
        <i data-lucide="bell" style="width: 20px; height: 20px;"></i>
        <span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
        <span id="notif-badge" style="position: absolute; top: 8px; left: 8px; background: #dc2626; color: white; font-size: 0.7rem; font-weight: 700; padding: 2px 6px; border-radius: 10px; min-width: 20px; text-align: center; display: none;"></span>
      </a>
      
      <!-- 2.2.5 Employee (Active) -->
      <a href="employee.html" class="sidebar-item active" id="employee-link" style="display: none;">
        <i data-lucide="briefcase" style="width: 20px; height: 20px;"></i>
        <span>ØµÙØ­ØªÙŠ</span>
      </a>
      
      <!-- 2.2.6 Coordinator (Hidden) -->
      <a href="coordinator.html" class="sidebar-item" id="coordinator-link" style="display: none;">
        <i data-lucide="users" style="width: 20px; height: 20px;"></i>
        <span>Ø§Ù„Ù…Ù†Ø³Ù‚ÙŠÙ†</span>
      </a>
      
      <!-- 2.2.7 Admin (Hidden) -->
      <a href="admin.html" class="sidebar-item" id="admin-link" style="display: none;">
        <i data-lucide="settings" style="width: 20px; height: 20px;"></i>
        <span>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      </a>
    </nav>
  </aside>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       3. MAIN CONTENT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <main class="main-content">
    <!-- 3.1 HEADER -->
    <div class="card header-card">
      <h1 style="font-size: 1.75rem; font-weight: 800;">ØµÙØ­ØªÙŠ</h1>
      <p style="opacity: 0.9; margin-top: 4px;">Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„ØªÙƒÙ„ÙŠÙØ§Øª</p>
    </div>

    <!-- 3.2 TASKS CONTAINER -->
    <div id="tasks-container">
      <div style="text-align: center; padding: 60px; color: #94a3b8;">
        <div style="font-size: 2rem; margin-bottom: 12px;">â³</div>
        <p style="font-weight: 600;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…...</p>
      </div>
    </div>
  </main>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       4. SCRIPTS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="assets/js/config.js"></script>
  <script src="assets/js/auth.js"></script>
  <script>
    // 4.1 AUTH CHECK
    const user = auth.checkSession();
    if (!user) {
      alert('â›” Ù„Ø§Ø¨Ø¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
      window.location.href = 'index.html';
    }

    // 4.2 ROLE CHECK (Employee or Admin only)
    if (user.role !== 'Ù…ÙˆØ¸Ù' && user.role !== 'Employee' && user.role !== 'Ù…Ø¯ÙŠØ±' && user.role !== 'Admin') {
      alert('â›” Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙ‚Ø·!');
      window.location.href = 'index.html';
    }

    // 4.3 INIT UI
    lucide.createIcons();
    document.getElementById('user-name').textContent = user.name + ' ğŸ‘‹';

    // 4.4 SHOW LINKS BY ROLE
    if (user.role === 'Ù…ÙˆØ¸Ù' || user.role === 'Employee') {
      document.getElementById('employee-link').style.display = 'flex';
    } else if (user.role === 'Ù…Ù†Ø³Ù‚' || user.role === 'Coordinator') {
      document.getElementById('coordinator-link').style.display = 'flex';
    } else if (user.role === 'Ù…Ø¯ÙŠØ±' || user.role === 'Admin') {
      document.getElementById('employee-link').style.display = 'flex';
      document.getElementById('coordinator-link').style.display = 'flex';
      document.getElementById('admin-link').style.display = 'flex';
    }

    // 4.5 NOTIFICATIONS BADGE
    const unreadCount = auth.getUnreadNotifications();
    const badge = document.getElementById('notif-badge');
    if (badge && unreadCount > 0) {
      badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
      badge.style.display = 'block';
    }

    // 4.6 LOAD TASKS
    loadTasks();

    async function loadTasks() {
      try {
        const result = await auth.apiCall('getEmployeeData', { name: user.name });
        if (result.success) displayTasks(result.tasks);
      } catch (err) {
        document.getElementById('tasks-container').innerHTML = `
          <div style="text-align: center; padding: 60px; color: #dc2626;">
            <div style="font-size: 3rem; margin-bottom: 12px;">âŒ</div>
            <p style="font-weight: 700;">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</p>
          </div>
        `;
      }
    }

    // 4.7 DISPLAY TASKS
    function displayTasks(tasks) {
      if (!tasks || tasks.length === 0) {
        document.getElementById('tasks-container').innerHTML = `
          <div style="text-align: center; padding: 60px; color: #94a3b8;">
            <div style="font-size: 3rem; margin-bottom: 12px;">ğŸ“‹</div>
            <p style="font-weight: 600;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹</p>
          </div>
        `;
        return;
      }

      document.getElementById('tasks-container').innerHTML = `
        <div class="card">
          <h2 style="font-weight: 700; margin-bottom: 16px;">Ø§Ù„Ù…Ù‡Ø§Ù… (${tasks.length})</h2>
          <div class="task-grid">
            ${tasks.map(t => `
              <div class="task-card">
                <div class="task-header">
                  <div class="task-id">${t.id}</div>
                  <span class="badge ${t.status.includes('ØªÙ…') ? 'badge-done' : 'badge-pending'}">${t.status}</span>
                </div>
                <div class="task-subject">${t.subject}</div>
                <div class="task-meta">
                  <div><strong>Ø§Ù„Ø¬Ù‡Ø©:</strong> ${t.entity}</div>
                  <div><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${t.date}</div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
