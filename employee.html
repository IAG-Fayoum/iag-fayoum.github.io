<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØµÙØ­ØªÙŠ - IAG</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 1. BASE STYLES */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Cairo', sans-serif; background: #f8f9fa; padding-bottom: 80px; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 2. SIDEBAR (Desktop) */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    .sidebar {
      position: fixed;
      right: 0;
      top: 0;
      width: 260px;
      height: 100vh;
      background: white;
      box-shadow: -2px 0 10px rgba(0,0,0,0.05);
      z-index: 100;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }
    
    .sidebar.hidden { transform: translateX(100%); }
    
    .sidebar-logo {
      padding: 24px;
      border-bottom: 1px solid #e9ecef;
      background: linear-gradient(135deg, #0f766e 0%, #115e59 100%);
      color: white;
    }
    
    .sidebar-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 24px;
      color: #495057;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.2s ease;
      border-right: 3px solid transparent;
    }
    
    .sidebar-item:hover {
      background: #f8f9fa;
      border-right-color: #0f766e;
      color: #0f766e;
    }
    
    .sidebar-item.active {
      background: #e6f7f5;
      border-right-color: #0f766e;
      color: #0f766e;
    }
    
    .sidebar-item.hidden {
      display: none;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 3. MAIN CONTENT */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    .main-content { margin-right: 260px; padding: 24px; }
    
    .card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); margin-bottom: 24px; }
    .header-card { background: linear-gradient(135deg, #0f766e, #115e59); color: white; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 4. TASK CARDS */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    .task-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
    .task-card { background: white; border: 2px solid #e9ecef; border-radius: 12px; padding: 20px; transition: all 0.2s; }
    .task-card:hover { border-color: #2563eb; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1); }
    
    .task-header { display: flex; justify-content: space-between; margin-bottom: 12px; }
    .task-id { font-weight: 800; color: #1e293b; }
    .badge { padding: 4px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700; }
    .badge-done { background: #dcfce7; color: #166534; }
    .badge-pending { background: #fef3c7; color: #92400e; }
    
    .task-subject { font-weight: 600; color: #334155; margin-bottom: 12px; line-height: 1.5; }
    .task-meta { font-size: 0.85rem; color: #64748b; display: flex; flex-direction: column; gap: 6px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 5. BOTTOM NAVIGATION (Mobile) */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #e9ecef;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      z-index: 50;
      display: none;
    }
    
    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 12px;
      color: #868e96;
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 600;
      transition: color 0.2s ease;
    }
    
    .bottom-nav-item.active { color: #0f766e; }
    .bottom-nav-item:hover { color: #0f766e; }
    .bottom-nav-item.hidden { display: none; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* 6. MOBILE RESPONSIVE */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    @media (max-width: 1024px) {
      .sidebar { transform: translateX(100%); }
      .sidebar.active { transform: translateX(0); }
      .main-content { margin-right: 0; }
      .bottom-nav { display: flex; }
      body { padding-bottom: 70px; }
      
      .mobile-header {
        background: white;
        padding: 16px;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 40;
      }
    }
    
    @media (min-width: 1025px) {
      .mobile-header { display: none; }
    }
    
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.3);
      z-index: 90;
      display: none;
    }
    
    .overlay.active { display: block; }
  </style>
</head>

<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 1. OVERLAY -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 2. MOBILE HEADER -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="mobile-header">
    <button onclick="toggleSidebar()" style="background: none; border: none; padding: 8px; cursor: pointer;">
      <i data-lucide="menu" style="width: 24px; height: 24px; color: #1f2937;"></i>
    </button>
    <h1 style="font-size: 1.125rem; font-weight: 700; color: #1f2937;">Ù…Ù‡Ø§Ù…ÙŠ</h1>
    <div style="width: 40px;"></div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 3. SIDEBAR -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 8px;">IAG System</h2>
      <p id="user-name" style="font-size: 0.875rem; opacity: 0.9;">Ù…Ø±Ø­Ø¨Ø§Ù‹</p>
    </div>
    
    <nav style="padding: 16px 0;">
      <a href="index.html" class="sidebar-item">
        <i data-lucide="home" class="w-5 h-5"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </a>
      
      <a href="distribution.html" class="sidebar-item">
        <i data-lucide="pie-chart" class="w-5 h-5"></i>
        <span>Dashboard</span>
      </a>
      
      <a href="forms.html" class="sidebar-item">
        <i data-lucide="file-text" class="w-5 h-5"></i>
        <span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
      </a>
      
      <a href="employee.html" class="sidebar-item active">
        <i data-lucide="briefcase" class="w-5 h-5"></i>
        <span>Ù…Ù‡Ø§Ù…ÙŠ</span>
      </a>
      
      <a href="coordinator.html" class="sidebar-item" id="coordinator-link">
        <i data-lucide="users" class="w-5 h-5"></i>
        <span>Ø§Ù„Ù…Ù†Ø³Ù‚ÙŠÙ†</span>
      </a>
      
      <a href="admin.html" class="sidebar-item" id="admin-link">
        <i data-lucide="settings" class="w-5 h-5"></i>
        <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      </a>
    </nav>
  </aside>

  <main class="main-content">
    <div class="card header-card">
      <h1 style="font-size: 1.75rem; font-weight: 800;">ØµÙØ­ØªÙŠ</h1>
      <p style="opacity: 0.9; margin-top: 4px;">Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„ØªÙƒÙ„ÙŠÙØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</p>
    </div>

    <div id="tasks-container">
      <div style="text-align: center; padding: 60px; color: #94a3b8;">
        <div style="font-size: 2rem; margin-bottom: 12px;">â³</div>
        <p style="font-weight: 600;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…...</p>
      </div>
    </div>
  </main>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- 4. BOTTOM NAVIGATION -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <nav class="bottom-nav">
    <div style="display: flex; width: 100%; justify-content: space-around;">
      
      <!-- Home -->
      <a href="index.html" class="bottom-nav-item">
        <i data-lucide="home" class="w-6 h-6"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </a>
      
      <!-- Dashboard -->
      <a href="distribution.html" class="bottom-nav-item">
        <i data-lucide="pie-chart" class="w-6 h-6"></i>
        <span>Dashboard</span>
      </a>
      
      <!-- Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ -->
      <a href="forms.html" class="bottom-nav-item">
        <i data-lucide="file-text" class="w-6 h-6"></i>
        <span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
      </a>
      
      <!-- Ù…Ù‡Ø§Ù…ÙŠ -->
      <a href="employee.html" class="bottom-nav-item active">
        <i data-lucide="briefcase" class="w-6 h-6"></i>
        <span>Ù…Ù‡Ø§Ù…ÙŠ</span>
      </a>
      
      <!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ù…Ø®ÙÙŠ - ÙŠØ¸Ù‡Ø± Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·) -->
      <a href="admin.html" class="bottom-nav-item hidden" id="admin-nav-link">
        <i data-lucide="settings" class="w-6 h-6"></i>
        <span>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
      </a>
    </div>
  </nav>

  <script src="assets/js/config.js"></script>
  <script src="assets/js/auth.js"></script>
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 1. INITIALIZATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    lucide.createIcons();
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 2. SECURITY & AUTH CHECK
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const user = auth.checkSession();
    if (!user) {
      window.location.replace('index.html');
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 3. ROLE-BASED DISPLAY
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    if (user) {
      // 3.1 Display User Name
      document.getElementById('user-name').textContent = user.name + ' ğŸ‘‹';
      
      // 3.2 Show/Hide Navigation Based on Role
      const isAdmin = user.role === 'Ù…Ø¯ÙŠØ±' || user.role === 'Admin';
      const isCoordinator = user.role === 'Ù…Ù†Ø³Ù‚' || user.role === 'Coordinator' || isAdmin;
      
      // Sidebar Links
      const coordinatorLink = document.getElementById('coordinator-link');
      const adminLink = document.getElementById('admin-link');
      const adminNavLink = document.getElementById('admin-nav-link');
      
      if (!isCoordinator && coordinatorLink) {
        coordinatorLink.style.display = 'none';
      }
      
      if (!isAdmin) {
        if (adminLink) adminLink.style.display = 'none';
        if (adminNavLink) adminNavLink.classList.add('hidden');
      } else {
        // Show admin link in bottom nav for admins
        if (adminNavLink) adminNavLink.classList.remove('hidden');
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 4. SIDEBAR TOGGLE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('overlay').classList.toggle('active');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 5. HELPER: SANITIZE OUTPUT (XSS Protection)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    function escapeHtml(text) {
      if (!text) return '';
      return text
        .toString()
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 6. LOAD TASKS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    loadTasks();

    async function loadTasks() {
      try {
        // Use 'getEmployeeData' to get assigned tasks
        const result = await auth.apiCall('getEmployeeData', { name: user.name });
        
        if (result.success) {
          displayTasks(result.tasks);
        } else {
          throw new Error(result.error || 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        }
      } catch (err) {
        document.getElementById('tasks-container').innerHTML = `
          <div style="text-align: center; padding: 60px; color: #dc2626;">
            <div style="font-size: 3rem; margin-bottom: 12px;">âŒ</div>
            <p style="font-weight: 700;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…</p>
            <p style="font-size: 0.9rem; opacity: 0.8;">${escapeHtml(err.message)}</p>
            <button onclick="loadTasks()" style="margin-top:16px; padding:8px 16px; cursor:pointer; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: 600;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
          </div>
        `;
      }
    }

    function displayTasks(tasks) {
      if (!tasks || tasks.length === 0) {
        document.getElementById('tasks-container').innerHTML = `
          <div style="text-align: center; padding: 60px; color: #94a3b8;">
            <div style="font-size: 3rem; margin-bottom: 12px;">ğŸ‰</div>
            <p style="font-weight: 600;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ù…Ø¹Ù„Ù‚Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
          </div>
        `;
        return;
      }

      document.getElementById('tasks-container').innerHTML = `
        <div class="card">
          <h2 style="font-weight: 700; margin-bottom: 16px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… (${tasks.length})</h2>
          <div class="task-grid">
            ${tasks.map(t => {
              const status = escapeHtml(t.status || 'Ø¬Ø¯ÙŠØ¯');
              const isDone = status.includes('ØªÙ…') || status.includes('Ù…Ù†ØªÙ‡ÙŠ');
              
              return `
              <div class="task-card">
                <div class="task-header">
                  <div class="task-id">#${escapeHtml(t.id)}</div>
                  <span class="badge ${isDone ? 'badge-done' : 'badge-pending'}">${status}</span>
                </div>
                
                <div class="task-subject">${escapeHtml(t.subject || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†')}</div>
                
                <div class="task-meta">
                  <div><strong>ğŸ“¥ Ø§Ù„Ø¬Ù‡Ø©:</strong> ${escapeHtml(t.entity || t.source || '-')}</div>
                  <div><strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${escapeHtml(t.date || '-')}</div>
                  ${t.attachment ? `<div style="margin-top:4px;"><a href="${escapeHtml(t.attachment)}" target="_blank" rel="noopener noreferrer" style="color:#2563eb; text-decoration:underline; font-weight:700;">ğŸ“ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±ÙÙ‚</a></div>` : ''}
                </div>
              </div>
            `}).join('')}
          </div>
        </div>
      `;
      
      lucide.createIcons();
    }
  </script>
</body>
</html>
